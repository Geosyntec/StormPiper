<!DOCTYPE html>
<html  dir="ltr">

    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title></title>
        <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon">
        <link rel="apple-touch-icon-precomposed" href="images/apple-touch-icon.png">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/uikit/2.26.4/css/uikit.gradient.css">

        <!-- <link rel="stylesheet" href="style.css"> -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/diversen/pandoc-uikit@master/style.css">
        <link href="https://vjs.zencdn.net/5.4.4/video-js.css" rel="stylesheet" />
        <script src="https://code.jquery.com/jquery-2.2.1.min.js"></script>
        <!-- <script src="uikit.js"></script> -->
        <script src="https://cdn.jsdelivr.net/gh/diversen/pandoc-uikit@master/uikit.js"></script>
        <!-- <script src="scripts.js"></script> -->
        <script src="https://cdn.jsdelivr.net/gh/diversen/pandoc-uikit@master/scripts.js"></script>
        <!-- <script src="jquery.sticky-kit.js "></script> -->
        <script src="https://cdn.jsdelivr.net/gh/diversen/pandoc-uikit@master/jquery.sticky-kit.js"></script>

        <meta name="generator" content="pandoc-uikit" />
                        <title>8_connections</title>
        <style type="text/css">code{white-space: pre;}</style>
                                                                  
                            
                 
    </head>

    <body>


        <div class="uk-container uk-container-center uk-margin-top uk-margin-large-bottom">

            
            <div class="uk-grid" data-uk-grid-margin >          
                <div class="uk-width-medium-1-4">
                    <div class="uk-overflow-container" data-uk-sticky="{top:25,media: 768}">
                        <div class="uk-panel uk-panel-box menu-begin" >

                            
                        </div>
                    </div>
                </div>

                <div class="uk-width-medium-3-4">

                    
<h1 id="data-integrations">Data Integrations</h1>
<p>Facility data, subbasin data, and results can be easily integrated
into other tools and applications through the <strong>Data Integration
Module.</strong> Navigate to the module by clicking on
<strong>Profile</strong> under the user menu in the top left corner of
the application. The <strong>Data Integration</strong> panel is
displayed below your profile information.</p>
<p>Data integration is performed through a REST API, which uses HTTP
methods to read data from the tool.</p>
<h2 id="obtaining-a-read-only-token">Obtaining a read-only token</h2>
<p>Each user is assigned a unique read-only token. This token allows the
API server to identify and authorize your requests. Your read-only token
will be displayed beneath your user profile.</p>
<h2 id="token-rotation">Token Rotation</h2>
<p>It is good practice to change your token at regular intervals, or in
the event of your token being compromised. To rotate your token, click
the <strong>Rotate Token</strong> button next to your token.</p>
<h2 id="making-api-calls">Making API calls</h2>
<p>All API calls are GET requests and are made in the following
format:</p>
<pre><code>https://www.tacomawatersheds.com/api/rest/{resource}/{resource_id}/token/{token}</code></pre>
<p>In the above URL structure, <code>{resource}</code> is the data type
you are requesting, <code>{resource_id}</code> is the specific ID of the
resource (optional and depends on the endpoint), and
<code>{token}</code> is your unique read-only token.</p>
<h3 id="api-endpoints">API Endpoints</h3>
<p>This API is organized around several endpoints representing different
types of resources: <code>tmnt_facility</code>,
<code>tmnt_delineation</code>, <code>subbasin</code>, and
<code>results</code>. All responses are provided in JSON format unless
otherwise specified.</p>
<p><strong>Common Parameters:</strong></p>
<ul>
<li><code>f</code>: (optional, default=json, [json, geojson]) Format of
response data</li>
<li><code>limit</code>: (optional, default=1e6) Number of records to
return</li>
<li><code>offset</code>: (optional, default=0) Start from index</li>
<li><code>epoch</code>: (optional, default=1980s, [all, 1980s, 2030s,
2050s, 2080s]) Climate epoch filter</li>
</ul>
<p><strong>Get attributes for all treatment facilities:</strong></p>
<pre><code>/api/rest/tmnt_facility/token/{token}?f={f}&amp;limit={limit}&amp;offset={offset}</code></pre>
<p><strong>Get attributes for a specific treatment
facility:</strong></p>
<p><code>/api/rest/tmnt_facility/{altid}/token/{token}</code> Replace
<code>{altid}</code> with the specific facility id.</p>
<p><strong>Get attributes for all delineations:</strong>
<code>/api/rest/tmnt_delineation/token/{token}?f={f}&amp;limit={limit}&amp;offset={offset}</code></p>
<p><strong>Get attributes for a specific delineation:</strong>
<code>/api/rest/tmnt_delineation/{altid}/token/{token}?f={f}</code></p>
<p>Replace <code>{altid}</code> with the specific delineation id.</p>
<p><strong>Get attributes for all subbasins</strong></p>
<p><code>/api/rest/subbasin/token/{token}?f={f}&amp;limit={limit}&amp;offset={offset}</code></p>
<p><strong>Get attributes for a specific subbasin:</strong></p>
<p><code>/api/rest/subbasin/{subbasin_id}/token/{token}</code></p>
<p>Replace <code>{subbasin_id}</code> with the specific subbasin id.</p>
<p><strong>Get water quality results for a specific subbasin:</strong>
<code>/api/rest/subbasin/wq/{subbasin_id}/token/{token}?epoch={epoch}</code></p>
<p>Replace <code>{subbasin_id}</code> with the specific subbasin id.</p>
<p><strong>Get water quality results for all subbasins:</strong></p>
<p><code>/api/rest/subbasin/wq/token/{token}?f={f}&amp;limit={limit}&amp;offset={offset}&amp;epoch={epoch}</code></p>
<p><strong>Get results</strong>
<code>/api/rest/results/token/{token}?ntype={ntype}&amp;limit={limit}&amp;offset={offset}&amp;epoch={epoch}</code></p>
<p>The <code>ntype</code> parameter is optional and filters the data by
node type (land_surface, tmnt_facility).</p>
<h2 id="how-to-connect-excel-with-tacoma-watersheds-results">How to
connect Excel with Tacoma Watersheds Results</h2>
<p>Power Query is a powerful tool within Microsoft Excel that allows you
to import data from various external data sources, including RESTful
APIs. This tutorial will guide you on how to connect Excel Power Query
with the Tacoma Watersheds <code>results</code> API.</p>
<p>Before starting, make sure you have your unique read-only token from
the Tacoma Watersheds API.</p>
<h3 id="step-1-open-power-query">Step 1: Open Power Query</h3>
<ol type="1">
<li>Open Excel, and go to the <code>Data</code> tab in the Ribbon.</li>
<li>Click on <code>Get Data</code> in the left corner of the
Ribbon.</li>
<li>In the dropdown menu, select <code>From Other Sources</code>, then
<code>From Web</code>.</li>
</ol>
<h3 id="step-2-connect-to-the-api">Step 2: Connect to the API</h3>
<ol type="1">
<li>A pop-up window will appear prompting you to enter a URL.</li>
<li>In this field, enter the following API endpoint URL:</li>
</ol>
<pre><code>https://www.tacomawatersheds.com/api/rest/results/token/{token}?ntype={ntype}&amp;limit={limit}&amp;offset={offset}&amp;epoch={epoch}</code></pre>
<p>Replace <code>{token}</code> with your unique read-only token and
fill in the <code>{ntype}</code>, <code>{limit}</code>,
<code>{offset}</code>, and <code>{epoch}</code> as per your
requirements. For example, if you want to get all results for
<code>land_surface</code> node type and for the <code>1980s</code>
climate epoch, your URL would be:</p>
<pre><code>https://www.tacomawatersheds.com/api/rest/results/token/your_token?ntype=land_surface&amp;limit=1000000&amp;offset=0&amp;epoch=1980s</code></pre>
<ol start="3" type="1">
<li>Click <strong>OK</strong></li>
</ol>
<h3 id="step-3-parse-the-response">Step 3: Parse the Response</h3>
<ol type="1">
<li>A new window named <code>Power Query Editor</code> will open, and
Excel will show you a preview of the data.</li>
<li>If the data appears as a single column of records, click on
<code>List</code> to convert it to a table. Then click on the button
with two arrows on the right side of the header of the column to expand
the data into a tabular format.</li>
<li>If the data is in nested JSON format, you may need to click on the
double-arrow button again to fully expand the data.</li>
</ol>
<h3 id="step-4-load-the-data">Step 4: Load the Data</h3>
<ol type="1">
<li>Once you are satisfied with the preview of the data, click on
<code>Close &amp; Load</code> in the <code>Home</code> tab.</li>
<li>Excel will create a new worksheet and load the data into a
table.</li>
</ol>                    
                </div>
            </div>
            <script src="https://vjs.zencdn.net/5.4.4/video.js"></script>
        </div>
    </body>
</html>
