"""add ntype to results

Revision ID: 0048dc98eed1
Revises: d3c78c83dde8
Create Date: 2023-04-14 14:43:34.094514

"""
import sqlalchemy as sa
from alembic import op
from sqlalchemy.dialects import postgresql

# revision identifiers, used by Alembic.
revision = "0048dc98eed1"
down_revision = "d3c78c83dde8"
branch_labels = None
depends_on = None


def upgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.add_column("result_blob", sa.Column("ntype", sa.String(), nullable=True))
    op.alter_column(
        "result_blob",
        "blob",
        existing_type=sa.TEXT,
        type_=postgresql.JSONB,
        postgresql_using="blob::jsonb",
    )
    # ### end Alembic commands ###


def downgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_column("result_blob", "ntype")
    op.alter_column(
        "result_blob",
        "blob",
        existing_type=postgresql.JSONB,
        type_=sa.JSON,
        postgresql_using="blob::json",
    )
    # ### end Alembic commands ###
